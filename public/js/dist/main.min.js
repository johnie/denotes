/*!
 * Denotes
 * Encouraging you to watch the worlds 250 best movies
 * http://denot.es
 * @author Johnie Hjelm
 * @version 0.0.1
 * Copyright 2014. MIT licensed.
 */
var app=angular.module("denotes",["angular-loading-bar"]);app.controller("MainController",function(n,t,e){e.start(),n.movies=[],n.limit=0,n.loadMore=function(){n.limit+=50},n.loadMore(),t({method:"GET",url:"/imdb"}).success(function(t){angular.forEach(t,function(t){e.complete(),$.getJSON("/imdb/"+t,function(t){var e=t.Poster.split("_V1_SX300.jpg"),i=e[0]+"_V1_SX180_AL_.jpg";n.movies.push({title:t.Title,genre:t.Genre,runtime:t.Runtime,director:t.Director,plot:t.Plot,post:i,imdbRating:t.imdbRating,done:!1}),n.$digest()})})}).error(function(n,t){console.log(t),e.complete()})}),app.directive("directiveWhenScrolled",function(){return function(n,t,e){t[0];$(window).bind("scroll",function(){$(window).scrollTop()+$(window).height()===$(document).height()&&n.$apply(e.directiveWhenScrolled)})}}),app.filter("truncate",function(){return function(n,t,e){return isNaN(t)&&(t=25),void 0===e&&(e="â€¦"),n.length<=t||n.length-e.length<=t?n:String(n).substring(0,t-e.length)+e}});