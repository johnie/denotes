/*!
 * Denotes
 * Encouraging you to watch the worlds 250 best movies
 * http://denot.es
 * @author Johnie Hjelm
 * @version 0.0.1
 * Copyright 2015. MIT licensed.
 */
var app=angular.module("denotes",["angular-loading-bar"]);app.controller("MainController",function(e,o,t){t.start(),e.movies=[],e.limit=0,e.loadMore=function(){e.limit+=50},e.loadMore(),e.show="All",o({method:"GET",url:"/imdb"}).success(function(o){angular.forEach(o,function(o){t.complete(),$.getJSON("/imdb/"+o,function(o){var t=o.Poster.split("_V1_SX300.jpg"),n=t[0]+"_V1_SX180_AL_.jpg";e.movies.push({title:o.Title,genre:o.Genre,runtime:o.Runtime,director:o.Director,plot:o.Plot,post:n,imdbRating:o.imdbRating,done:!1}),e.$digest()})})}).error(function(e,o){console.log(o),t.complete()}),e.showFn=function(o){return"All"===e.show?!0:o.done&&"Complete"===e.show?!0:o.done||"Incomplete"!==e.show?!1:!0}}),app.directive("directiveWhenScrolled",function(){return function(e,o,t){o[0];$(window).bind("scroll",function(){$(window).scrollTop()+$(window).height()===$(document).height()&&e.$apply(t.directiveWhenScrolled)})}}),app.directive("moviePopover",function(){return{restrict:"E",template:'<aside class="movies__popover" ng-class="{active: popover}"><h3 class="popover__title">{{ movie.title }} <span class="popover__runtime">{{ movie.runtime }}</span></h3><p class="popover__genre">{{ movie.genre }}</p><p class="popover__plot">{{ movie.plot}} </p><p class="popover__director"><strong>Director: </strong>{{ movie.director }}</p></aside>'}}),app.filter("truncate",function(){return function(e,o,t){return isNaN(o)&&(o=25),void 0===t&&(t="â€¦"),e.length<=o||e.length-t.length<=o?e:String(e).substring(0,o-t.length)+t}});